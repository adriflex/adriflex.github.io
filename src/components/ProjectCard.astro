---
interface Props {
  title: string;
  description: string;
  slug: string;
  color: string;
  tags: string[];
  featured?: boolean;
  cover?: string;
}
const { title, description, slug, color, tags, cover } = Astro.props;

// Derive une couleur de fond légère depuis la couleur dominante (hex → rgba 12%)
// On utilise une astuce CSS inline plutôt que du JS
---
<a
  href={`/projects/${slug}`}
  class="group block rounded-2xl overflow-hidden border border-ink/8 bg-cream-dark hover:border-ink/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-1"
  style={`--project-color: ${color};`}
>
  <!-- Zone visuelle -->
  <div class="h-44 relative overflow-hidden"
    style={`background-color: color-mix(in srgb, ${color} 15%, var(--color-cream));`}
  >
    {cover ? (
      <img src={cover} alt={title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
    ) : (
      <>
        <div
          class="absolute inset-0 flex items-center justify-center"
        >
          <div class="w-32 h-32 rounded-full opacity-20 group-hover:scale-110 transition-transform duration-500" style={`background: ${color};`}></div>
        </div>
        <span
          class="absolute inset-0 flex items-center justify-center text-5xl font-display font-bold opacity-30 group-hover:opacity-50 transition-opacity duration-300 select-none"
          style={`color: ${color};`}
        >
          {title.charAt(0)}
        </span>
      </>
    )}
  </div>

  <!-- Contenu texte -->
  <div class="p-5">
    <h3 class="font-display text-base font-bold mb-1 group-hover:text-accent transition-colors duration-200">
      {title}
    </h3>
    <p class="text-sm text-ink/60 mb-4 line-clamp-2 font-body leading-relaxed">
      {description}
    </p>
    <div class="flex gap-1.5 flex-wrap">
      {tags.map(tag => (
        <span class="text-xs px-2.5 py-0.5 rounded-full border border-ink/12 text-ink/50 font-body">
          {tag}
        </span>
      ))}
    </div>
  </div>
</a>
